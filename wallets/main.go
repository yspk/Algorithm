package main


import (
	"coding.net/baoquan2017/wallet-go/lib/web3"
	"coding.net/baoquan2017/wallet-go/lib/web3/providers"
	"fmt"
	"sync"
	"time"
)

var accounts = []string{
	"0x96541cf64979162dAB00C314222eF580F6EF86aC",
	"0xb4e7262740c1871B4979747a3799A3C201CB53b5",
	"0xB66b42F4fBE3ea20d659Af1F468aC044B7991DA6",
	"0xc3969f2DE876C59650f8c25085c02E7cd139dF73",
	"0x0E197f713A536330ae15f8880D88dC17c333938f",
	"0x0769767eBC9ADE8b086fF2a12583a5F5019598fa",
	"0x63454F272f3e96F8385D96Dff94597C7110431e7",
	"0xC7F4a14B73FD3944DB0770cA6881E2a98A4077B4",
	"0xB8aEFBFD062085e594E399aDDcF112bdF0De1aBA",
	"0xc3ccB76cFdc823CEBEacEb4ba0c2D164C6C96Bb6",
	"0x6c6115E3D09A005961F3c33BC9cF49dB9505A0ba",
	"0x1a0aE735B1fd20Df091ac54908975A5cb1dE3c1C",
	"0xDC4bcc51193bF027A98B2cc45Fc54D71566E376c",
	"0x9D749BF44D35Aa29e267B1c3e31F0B5B6d596AcF",
	"0xE8874Ad346F580e3082297c39055557e033e67Aa",
	"0x4D87C9B84B27f9cB00F767E65D44A2a387422d03",
	"0x5cc977bE0DDEdD484DBba35e6663fe7BEE578f77",
	"0x308233d92e7736931023357F7b72f7232E9f81db",
	"0x27cc02CB39018194259427097a1E93f91210074f",
	"0x77e9c0e9B9188aDd15D7aE15e539Dd916A80d261",
	"0xDE1e0879406e6ce1f70C7434a0D80cDA1c839751",
	"0xC9ec0cF5Bd01303920Fec627A5dc174C90A6b6e0",
	"0xb11aa71dA2a3E9Bf8B6dC59e75A95025F3B3553d",
	"0x5Db117c7364f80AB2372BB41479877c6C36ec622",
	"0xCF4AB9b2f73cCc7ED5584dE13Dcc2e03291b6B36",
	"0x050fCaba38075401095AeE287d783A0C74718eD4",
	"0x7c67913D0B5fbB24e58eB52cE24D994F3821bF1D",
	"0x8E160Bab161eD88188B618999a48C7791fd06b61",
	"0x87b395A6e6f1d64703a5eD5904fbC8fd5C3B4566",
	"0x59648EE3aE87Ebe94f367A92e4Cb4715344936eA",
	"0x0678C0F4FF27cDbe9f6F08dcf768F63a87e2F096",
	"0x0510C9959eA738887230d1861f4dc00cb706D152",
	"0x5554957e6BD15A4dD5d797685189D36B1e15c978",
	"0x075575054d99F38ee263C106c6DABed654920999",
	"0x99905350dE0f3D40176412D08680418619621CeD",
	"0x88a03c49eC2d8FEe7A2EAFe3348FEa63BDcc2bE0",
	"0x00Be2BD4C5dd8E7a3163558E42804D3F346B9578",
	"0x733f59C0a284dD1C7329d01Db4C5A706c029ffb4",
	"0x6840759Cce39e2f6aEe8e28600D04D8B3b7bB47a",
	"0x675544cD3d503cD4dE326766ADA63bd56acC09BF",
	"0x504bD05865de8Da755cc1EC377204763845b14DB",
	"0xAd00bE8831AE258AaD0A7069c042205b7676b616",
	"0x8b05082d432C129693a313A2b25d469B4a398f71",
	"0x74dC1A181E9d9F109C437cE6280E5eCf9deba2EF",
	"0x1a4b2735450fE3C056D194417cA8C0fdFdBC9eD5",
	"0x2C755F901F443aadF34770312C651a690ec52919",
	"0xFBe911BD430D09f119132A026AA96110e77b6035",
	"0x4D9Dbb9FcB188b9BC6ef43419122382ECe96B707",
	"0x31b5a2A69f4E947805C2d4b10830ACdB2f895E49",
	"0x5411B43B0515Cfc6975775b616283304606D6499",
	"0x2FdFB593016c8649Deb67b6818491a28A9a33D78",
	"0x0a057cF491BedF47a7668099BCcF93f751e20D95",
	"0x01896811FF9c3aE70B67b365835c5AAB2E160BE4",
	"0xcA11078A403C3bd0F06fF8BEBf09d1Ee49B70c03",
	"0x7ab45aDA5389DF6f5b046Be9e64ff189Ef05eE49",
	"0xe7cCc305baC591eb562E795750E1E8b0D0cA8F9F",
	"0x8CdEb383e1B61d39cCAeDFb82AAa4beD6a953FcB",
	"0xB21CeeBc37727038CaD043717b126ACD634d6aAA",
	"0x0422d2Bc0602fD4cCaff0057a8f64D9B813c994b",
	"0xE0D4B946c517E36a9d0DB26fC990ACFd9F7ccd3E",
	"0x012A0C30e1C3c80bf885928721a939fB0634B1a2",
	"0x3e32daDF6A846790564392F1662F76d37e294178",
	"0x073b4F23FF96d8F76502d35988b3870e3bfd0CDb",
	"0x71928a9eEa148F259253Db9DBD79B2980DfA1EF5",
	"0x00BA6E624Ab5b5582809c2e48EfD02937D3A939a",
	"0x4764834627F301636C4962952Ff7FF728F13A833",
	"0x1FFB2B35Dc1017348185Ba1ffa6AC415271b3d66",
	"0x74d3dE5D8e1C66A58df8Fd77719B630B96ef8d76",
	"0xE5C032711c71EB3F2bE3d21Cf9DfF62577900414",
	"0x6845E18337ff79fe018AF9c7c3086DEc69E76696",
	"0xc91eD593FdEfe38884d4c87539CABa5826a9a916",
	"0x358C6d5375cB3855839fA44bF1fc64739D20146c",
	"0x168A0f6794Ee86222271E826F1D70bBA39C1687c",
	"0xA8DEd10ED9bA2EaaAe3c65E96A60425910a283B6",
	"0x877D6E13dfE9f3d3d793f599b3c7877d2c914d6b",
	"0x82C618743EC9b64B515d0FfD42253605118aEb97",
	"0x74Ee689683625354e98Fd23BD0785f761e2adBa0",
	"0xf56caB60a76B3820f0c65E965cDd81ab07a638eb",
	"0x7A7FB18cF7c2fD58a98B5320a2837F66C4b19905",
	"0x1e6E174d36e6d8bfd9024E7571600CD122eb6974",
	"0x01e4832eF251507FA399A7B8B24faef067EFDDe6",
	"0x44A7Fedb08B464b930aECdB885D0f387B0C76BE3",
	"0xC7b11622aC1c42c7740Bd366a3bDc7CC2b911Ba5",
	"0x9D80dc97F2F4c368D478ec09b2aD568257422D23",
	"0x4b565FC406C168922DC875a7013434F02e0CA2a7",
	"0xB80B1831386fd5370d2453b2d366b9F234141bD2",
	"0x2292a6241B836dB74f22Bfcf55EdBb9EEF8D39eA",
	"0xB1cC62D1232Eb830275F2d658645Ec3bfc208cA6",
	"0x666aB05Dd4EC5EC6Ae3C29AD7fA77Da649086ee8",
	"0x700DB9A730a1D75ACAE433a716bB8aea6F304067",
	"0x74c465c8e0CA31FEa7307e7deEB03F1392E1200d",
	"0xB513ED9F618380E5e7D3D1F780bE8435F159C7b7",
	"0xd5e8b044635d4d8fB371A501845ed21E71e9Cd05",
	"0x6Ca0731D75d03b29b8e6C9c8B01Bc3a894741b1B",
	"0xD467138C2761D8C6663f8B805e47903d25634161",
	"0xFc25FAc621D9E546D6dfE38C31A6Ad77c6e7d1c6",
	"0x69543df5caef39ab2e27e400bb6b2ceba114322c",
}

//var accounts = []string{
//	"0x0678C0F4FF27cDbe9f6F08dcf768F63a87e2F096",
//	"0x0510C9959eA738887230d1861f4dc00cb706D152",
//	"0x5554957e6BD15A4dD5d797685189D36B1e15c978",
//	"0x075575054d99F38ee263C106c6DABed654920999",
//	"0x99905350dE0f3D40176412D08680418619621CeD",
//	"0x88a03c49eC2d8FEe7A2EAFe3348FEa63BDcc2bE0",
//}

//var accounts = []string{
//	"0x00Be2BD4C5dd8E7a3163558E42804D3F346B9578",
//	"0x733f59C0a284dD1C7329d01Db4C5A706c029ffb4",
//	"0x6840759Cce39e2f6aEe8e28600D04D8B3b7bB47a",
//	"0x675544cD3d503cD4dE326766ADA63bd56acC09BF",
//	"0x504bD05865de8Da755cc1EC377204763845b14DB",
//	"0xAd00bE8831AE258AaD0A7069c042205b7676b616",
//	"0x8b05082d432C129693a313A2b25d469B4a398f71",
//	"0x74dC1A181E9d9F109C437cE6280E5eCf9deba2EF",
//	"0x1a4b2735450fE3C056D194417cA8C0fdFdBC9eD5",
//	"0x2C755F901F443aadF34770312C651a690ec52919",
//	"0xFBe911BD430D09f119132A026AA96110e77b6035",
//	"0x4D9Dbb9FcB188b9BC6ef43419122382ECe96B707",
//	"0x31b5a2A69f4E947805C2d4b10830ACdB2f895E49",
//	"0x5411B43B0515Cfc6975775b616283304606D6499",
//	"0x2FdFB593016c8649Deb67b6818491a28A9a33D78",
//	"0x0a057cF491BedF47a7668099BCcF93f751e20D95",
//	"0x01896811FF9c3aE70B67b365835c5AAB2E160BE4",
//	"0xcA11078A403C3bd0F06fF8BEBf09d1Ee49B70c03",
//	"0x7ab45aDA5389DF6f5b046Be9e64ff189Ef05eE49",
//	"0xe7cCc305baC591eb562E795750E1E8b0D0cA8F9F",
//}

//var accounts = []string{
//	"0x8CdEb383e1B61d39cCAeDFb82AAa4beD6a953FcB",
//	"0xB21CeeBc37727038CaD043717b126ACD634d6aAA",
//	"0x0422d2Bc0602fD4cCaff0057a8f64D9B813c994b",
//	"0xE0D4B946c517E36a9d0DB26fC990ACFd9F7ccd3E",
//	"0x012A0C30e1C3c80bf885928721a939fB0634B1a2",
//	"0x3e32daDF6A846790564392F1662F76d37e294178",
//	"0x073b4F23FF96d8F76502d35988b3870e3bfd0CDb",
//	"0x71928a9eEa148F259253Db9DBD79B2980DfA1EF5",
//	"0x00BA6E624Ab5b5582809c2e48EfD02937D3A939a",
//	"0x4764834627F301636C4962952Ff7FF728F13A833",
//	"0x1FFB2B35Dc1017348185Ba1ffa6AC415271b3d66",
//	"0x74d3dE5D8e1C66A58df8Fd77719B630B96ef8d76",
//	"0xE5C032711c71EB3F2bE3d21Cf9DfF62577900414",
//	"0x6845E18337ff79fe018AF9c7c3086DEc69E76696",
//	"0xc91eD593FdEfe38884d4c87539CABa5826a9a916",
//	"0x358C6d5375cB3855839fA44bF1fc64739D20146c",
//	"0x168A0f6794Ee86222271E826F1D70bBA39C1687c",
//	"0xA8DEd10ED9bA2EaaAe3c65E96A60425910a283B6",
//	"0x877D6E13dfE9f3d3d793f599b3c7877d2c914d6b",
//	"0x82C618743EC9b64B515d0FfD42253605118aEb97",
//	"0x74Ee689683625354e98Fd23BD0785f761e2adBa0",
//	"0xf56caB60a76B3820f0c65E965cDd81ab07a638eb",
//	"0x7A7FB18cF7c2fD58a98B5320a2837F66C4b19905",
//	"0x1e6E174d36e6d8bfd9024E7571600CD122eb6974",
//	"0x01e4832eF251507FA399A7B8B24faef067EFDDe6",
//	"0x44A7Fedb08B464b930aECdB885D0f387B0C76BE3",
//	"0xC7b11622aC1c42c7740Bd366a3bDc7CC2b911Ba5",
//	"0x9D80dc97F2F4c368D478ec09b2aD568257422D23",
//	"0x4b565FC406C168922DC875a7013434F02e0CA2a7",
//	"0xB80B1831386fd5370d2453b2d366b9F234141bD2",
//	"0x2292a6241B836dB74f22Bfcf55EdBb9EEF8D39eA",
//	"0xB1cC62D1232Eb830275F2d658645Ec3bfc208cA6",
//	"0x666aB05Dd4EC5EC6Ae3C29AD7fA77Da649086ee8",
//	"0x700DB9A730a1D75ACAE433a716bB8aea6F304067",
//	"0x74c465c8e0CA31FEa7307e7deEB03F1392E1200d",
//	"0xB513ED9F618380E5e7D3D1F780bE8435F159C7b7",
//	"0xd5e8b044635d4d8fB371A501845ed21E71e9Cd05",
//	"0x6Ca0731D75d03b29b8e6C9c8B01Bc3a894741b1B",
//	"0xD467138C2761D8C6663f8B805e47903d25634161",
//	"0xFc25FAc621D9E546D6dfE38C31A6Ad77c6e7d1c6",
//}

//var accounts = []string{
//	"0x5dc8218de142091d33053e60a96aa825a9007eee",
//	"0x2fdb0b9691737667dbc4817368183f6138da6999",
//	"0x165734815ec52db9fa1abff9ed787aa402620b05",
//	"0x4dfead249ec96d22df55f2e4cae9836530acd7c3",
//	"0xc6fc131bbe1dca2d887ef819f1b5a7c3f9aeb5e9",
//	"0x7665525f32dc91da91352894cf02cad05149f62f",
//	"0x29884a1ff8a08aabc115ac7a3765c6e2a530af30",
//	"0x53ebe26b4e258c2c1016e6cd2fb59e5c74448e94",
//	"0x2df57a64c07d0df34cac55451ca4b199905c5bf7",
//	"0xbcb417eaa3a585903ee729fbe504c0be778beab9",
//	"0x29586ce23b97d7d3efc772485d756188063bc3ea",
//	"0x37742b0bf8fa32d498e5348f6d0ae199ad14b2f5",
//	"0x4dfa0358ed69f86e7895e3958e99487a0e94309b",
//	"0xdb9251fba4a6bb994371785b5cb0eac9f6dcd2a7",
//	"0xac9788b52551268e86f9b98cef7638ae210fb35e",
//	"0xd82328a5006da17fefa5d7a40e4cf347196b9ec5",
//	"0x6d63e06f515b68c19aec08aba348e57c32457f47",
//	"0xe4f864041adde74b0f3109e22c3c8d2bdf8e412c",
//	"0x7d11f189be900865d0a4bdd9b9643320418ca69b",
//	"0x9b366a90d9d96f7ceca02f45221c519eb4328edf",
//	"0x3a9802adc3793bdbc078d905c896956d4ad6eb92",
//	"0xedd044c0f8762afc59d0b1a4c9f02283d560e8c5",
//	"0xf4012460f04931985a1b29a2b99f277b8cf48f2c",
//	"0xb5a7b68904b952cde51027ebf7b0019d04cb355c",
//	"0x4a45e06926d271e6e53287fac0c3c9a3012e7ee9",
//	"0xdda5b4329121739317f3aa7089ebb46913765f37",
//	"0x098d43ee8e3a2e37fa7d6a698cd3d36653e0c425",
//	"0x07acff5f5faf25f8addf6a1ed983bc1bc083ce80",
//	"0x28071212765dddc4e59b9216ea625cb9c19b5689",
//	"0x057c326b03aa0a9afcb348449e092aa73193d59d",
//	"0xca29a61d0c26bdaf155cb1a84571d9f805ebb534",
//	"0xb31a14e4977b66a5275397f2a039131aea1896ca",
//	"0x9812c1675f84f2cd8f7ccde065e76be1693e2c6e",
//	"0xf93781b8d5effbc75980679b85e91dc3275dea49",
//	"0xea22dcf1a9ff385eda5585be1fbccaf77486f35f",
//	"0x2b265a56179df97d54ebd4c71de1c20ee445f5e6",
//	"0xa2f819e04e6b97b4f95f0ece0136b4bb8fbf5ca2",
//	"0xf5be4ed41c1385f224a443659117c2b30f4d08ed",
//	"0x2de49ccf781e132e84fab526e42678d546fc6fa9",
//	"0xb351f46a302cc4d0daf47a029a0f9bd64ad80cde",
//	"0xbd35bb56bb43db894a03461e3c3bb99c67ef56b5",
//	"0xb0faa6915183815bce40162ae55e98ac6c6d4260",
//	"0xb289e350d4383234dd28f777699284d357b6fc43",
//	"0x2fe097ae072af0fe4b23e9a8fefdf075199e2d0d",
//	"0xd80fbb95b20ce2dbe6b8854b1a5223109b88b8a4",
//	"0xacf6a86b88193b7ef4fac2c35b74d7e7a6378ac6",
//	"0xcf8a7f308e59395d62d5f77143f3f267ffa08100",
//	"0xecfb9c91f672fdadaaebc883e651da98fb654a4c",
//	"0x169569025e6f037e620e71b148158ec9ab73aef9",
//	"0x92075a9bb0b063fed1619496fd6906faa8a3c809",
//	"0xe8c591e1134abfde36e1e309bce0fe87694219b8",
//	"0xba3bdeeb6fd60bb42699f1cb33052a7b3fc63e55",
//	"0xc125181bfacea94c5c427e59bd989a4ea2b78de1",
//	"0xa75448431a8a63b7c2321e5013518fdcd4002e70",
//	"0x150f1c5ac79dd912987164876ed7555e80112256",
//	"0x1a368d85ca5234015a96cef57346106cdaf11a7e",
//	"0x3d2fe4124d9b7bf32e105c22761d398019f0b9c6",
//	"0xe331d40483bdf70ec7574e752e2b4e84bc4ed20e",
//	"0x586be1bfb91e67a47b2cd683207e1616dee17ff7",
//	"0x30dc339211c6854689614dfc7fb2641dcd08c331",
//	"0x7873b5045a627a0c53f340c16862cbcb488239c8",
//	"0x985ea9e01eb328638233755ffb78edbf2e4e609d",
//	"0xbe7a4943420ae26ffd2aa4d2e9e57bf2a331a9c2",
//	"0xa1929231ed5045a5479ef60fd9d7d9bea9ca2290",
//	"0x27e5f33b01c67bd7801f514a9330ab9c8cecac9e",
//	"0x15c528b16986afeaf16a7fab60d9a1d46c95a6f2",
//}

func main() {
	al := len(accounts)
	fmt.Println("count:", al)
	httpP, _ := providers.NewHttpProvider("http://47.254.153.168:8545", 5)
	//httpP, _ := providers.NewHttpProvider("http://127.0.0.1:58545", 100)
	w3 := web3.NewWeb3(httpP)
	var total float64
	found := make(chan float64, al)
	var pend sync.WaitGroup
	pend.Add(1)
	go func() {
		defer pend.Done()
		var l int
		for {
			if value, ok := <-found; ok {
				l++
				total += value
			} else {
				break //表示channel已经被关闭，退出循环
			}

			if l == al {
				close(found)
			}
		}
	}()

	for k, v := range accounts {
		pend.Add(1)
		go func(k int, ac string) {
			defer pend.Done()
			for {
				if count, err := w3.Eth.GetBalance(ac); err == nil {
					fmt.Println(k,ac,count)
					found <- count
					break
				} else {
					fmt.Println(err.Error())
				}
				time.Sleep(time.Second*10)
			}
		}(k, v)
	}
	pend.Wait()
	//time.Sleep(time.Second*2)
	//close(found)
	height,_ := w3.Eth.GetBlockNumber()
	fmt.Println("blockNumber:",height)
	fmt.Println("time:",time.Now().Format("2006/01/02 - 15:04:05"))
	fmt.Println("total:", total/1e18)
}
